<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./drumkit.css">
    </head>
    <body>
        <div class="keys">
            <div data-key="65" class="key">
                <kbd>A</kbd>
                <span>clap</span> 
            </div>
            <div data-key="83" class="key">
                <kbd>S</kbd>
                <span>kick</span> 
            </div>
            <div data-key="68" class="key">
                <kbd>D</kbd>
                <span>openhat</span> 
            </div>
            <div data-key="70" class="key">
                <kbd>F</kbd>
                <span>snare</span> 
            </div>
            <div data-key="71" class="key">
                <kbd>G</kbd>
                <span>tink</span> 
            </div>
            <div data-key="72" class="key">
                <kbd>H</kbd>
                <span>tom</span> 
            </div>
            <div data-key="74" class="key">
                <kbd>J</kbd>
                <span>boom</span> 
            </div>
            <div data-key="75" class="key">
                <kbd>K</kbd>
                <span>hihat</span> 
            </div>
            <div data-key="76" class="key">
                <kbd>L</kbd>
                <span>ride</span> 
            </div>
        </div>

        <audio src="./sounds/clap.wav" data-key="65"></audio>
        <audio src="./sounds/kick.wav" data-key="83"></audio>
        <audio src="./sounds/openhat.wav" data-key="68"></audio>
        <audio src="./sounds/snare.wav" data-key="70"></audio>
        <audio src="./sounds/tink.wav" data-key="71"></audio>
        <audio src="./sounds/tom.wav" data-key="72"></audio>
        <audio src="./sounds/boom.wav" data-key="74"></audio>
        <audio src="./sounds/hihat.wav" data-key="75"></audio>
        <audio src="./sounds/ride.wav" data-key="76"></audio>

        <script>

            function removeTransition(e) {
                if (e.propertyName !== 'transform') return;
                this.classList.remove('playing');
            }

            const keys = document.querySelectorAll('.key');
            keys.forEach(key => key.addEventListener('transitionend', removeTransition));

            window.addEventListener("keydown", function(e) {
                const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
                const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
                if (!audio) return;
                audio.currentTime = 0;
                audio.play();
                key.classList.add('playing');
            });

        </script>
    </body>
</html>